# Dubbo的使用和理解

- Dubbo是Alibaba开源的分布式服务框架，它最大的特点是按照分层的方式来架构，使用这种方式可以使各个层之间解耦合（或者最大限度地松耦合）。从服务模型的角度来看，Dubbo采用的是一种非常简单的模型，要么是提供方提供服务，要么是消费方消费服务，所以基于这一点可以抽象出服务提供方（Provider）和服务消费方（Consumer）两个角色。

- Dubbo主要特点：

  1、透明化的远程方法调用，就像调用本地方法一样，调用远程方法，只需简单的配置，没有任何API侵入

  2、软负载均衡及容错机制。可以在内网代替F5等硬件负载均衡器，降低成本，减少单点故障。

  3、服务自动注册于发现，不再需要写死服务提供方地址，注册中心基于接口名查询服务提供者的IP地址，并且能够平滑添加或删除服务提供者。

  4、Dubbo采用全Spring配置方式，透明化接入应用，对应用没有任何API侵入，只需用Spring加载Dubbo的配置即可，Dubbo基于Spring的Schema扩展进行加载。

- Dubbo基础组件：
  - Provider： 暴露服务的提供方。
  - Consumer：调用远程服务的服务消费方。
  - Registry： 服务注册中心和发现中心。
  - Monitor： 统计服务和调用次数，调用时间监控中心。（dubbo管控中心的控制台页面中可以显示）
  - Container：服务运行的容器。

- Dubbo调用关系：

   0、服务器负责启动，加载，运行提供者（例如在tomcat容器中，启动dubbo服务端）。

  1、提供者在启动时，向注册中心注册自己提供的服务。

  2、消费者启动时，向注册中心订阅自己所需的服务。

  3、注册中心返回提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。

  4、消费者，从远程接口列表中，调用远程接口，dubbo会基于负载均衡算法，选一台提供者进行调用，如果调用失败则选择另一台。

  5、消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。（可以在dubbo管控中心的可视化界面看到）

