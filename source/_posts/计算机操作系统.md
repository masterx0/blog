---
title: 计算机操作系统
date: 2020-06-22 14:40:33
tags: 操作系统
categories: interview
---

# 基本特征
- - -
## 并发和并行
1. 并发是指宏观上在一段时间内能同时运行多个程序，而并行则指同一时刻能运行多个指令。
2. 并行需要硬件支持，如多流水线、多核处理器或者分布式计算系统。
3. 操作系统通过引入进程和线程，使得程序能够并发运行。
## 共享
1. 共享是指系统中的资源可以被多个并发进程共同使用。有两种共享方式：互斥共享和同时共享。
2. 互斥共享的资源称为临界资源，例如打印机等，在同一时刻只允许一个进程访问，需要用同步机制来实现互斥访问。
## 虚拟
1. 虚拟技术把一个物理实体转换为多个逻辑实体。主要有两种虚拟技术：时（时间）分复用技术和空（空间）分复用技术。
2. 多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占用处理器，每次只执行一小个时间片并快速切换。
3. 虚拟内存使用了空分复用技术，它将物理内存抽象为地址空间，每个进程都有各自的地址空间。地址空间的页被映射到物理内存，地址空间的页并不需要全部在物理内存中，当使用到一个没有在物理内存的页时，执行页面置换算法，将该页置换到内存中。

# 进程管理
- - -
## 进程与线程
- 进程

进程是资源分配的基本单位。

- 线程

线程是独立调度的基本单位。一个进程中可以有多个线程，它们共享进程资源。

- 区别

由于创建或撤销进程时，系统都要为之分配或回收资源，如内存空间、I/O 设备等，所付出的开销远大于创建或撤销线程时的开销。类似地，在进行进程切换时，涉及当前执行进程 CPU 环境的保存及新调度进程 CPU 环境的设置，而线程切换时只需保存和设置少量寄存器内容，开销很小。
## 进程同步

- 临界区

对临界资源进行访问的那段代码称为临界区。为了互斥访问临界资源，每个进程在进入临界区之前，需要先进行检查。
```
// entry section
// critical section;
// exit section
```

- 同步与互斥
   - 同步：多个进程因为合作产生的直接制约关系，使得进程有一定的先后执行关系。
   - 互斥：多个进程在同一时刻只有一个进程能进入临界区。
- 信号量
   - 信号量（Semaphore）是一个整型变量，可以对其执行 down 和 up 操作，也就是常见的 P 和 V 操作。
      - **down** : 如果信号量大于 0 ，执行 -1 操作；如果信号量等于 0，进程睡眠，等待信号量大于 0；
      - **up** ：对信号量执行 +1 操作，唤醒睡眠的进程让其完成 down 操作。
   - down 和 up 操作需要被设计成原语，不可分割，通常的做法是在执行这些操作的时候屏蔽中断。
   - 如果信号量的取值只能为 0 或者 1，那么就成为了 **互斥量（Mutex）** ，0 表示临界区已经加锁，1 表示临界区解锁。
## 进程通信
进程同步与进程通信很容易混淆，它们的区别在于：

- 进程同步：控制多个进程按一定顺序执行；
- 进程通信：进程间传输信息。

进程通信是一种手段，而进程同步是一种目的。也可以说，为了能够达到进程同步的目的，需要让进程进行通信，传输一些进程同步所需要的信息。

1. 管道，具有以下限制：
   - 只支持半双工通信（单向交替传输）；
   - 只能在父子进程或者兄弟进程中使用。
2. 命名管道(FIFO)，去除了管道只能在父子进程中使用的限制
2. 消息队列，相比于 FIFO，消息队列具有以下优点：
   - 消息队列可以独立于读写进程存在，从而避免了 FIFO 中同步管道的打开和关闭时可能产生的困难；
   - 避免了 FIFO 的同步阻塞问题，不需要进程自己提供同步方法；
   - 读进程可以根据消息类型有选择地接收消息，而不像 FIFO 那样只能默认地接收。
4. 信号量，是一个计数器，用于为多个进程提供对共享数据对象的访问。
4. 套接字(socket)，与以上通信机制不同的是，它可用于不同机器间的进程通信。



